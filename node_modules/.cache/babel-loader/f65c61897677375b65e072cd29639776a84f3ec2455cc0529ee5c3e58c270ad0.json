{"ast":null,"code":"var _jsxFileName = \"/home/renan/Desktop/KENZIE/M3/SPRINT 5/ENTREGAS/VERCEL/renangiaretta./src/contexts/CartContext.tsx\",\n  _s = $RefreshSig$();\nimport { createContext, useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { api } from '../services/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const CartContext = /*#__PURE__*/createContext({});\nexport const CartProvider = _ref => {\n  _s();\n  let {\n    children\n  } = _ref;\n  const navigate = useNavigate();\n  const [products, setProducts] = useState([]);\n  const [loadProducts, setLoadProducts] = useState(false);\n  const [modalView, setModalView] = useState(false);\n  const [cartList, setCartList] = useState([]);\n  const [productsOnCart, setProductsOnCart] = useState([]);\n  const [filter, setFilter] = useState();\n  useEffect(() => {\n    async function getProducts() {\n      const token = localStorage.getItem('TOKEN');\n      api.defaults.headers.common.authorization = `Bearer ${token}`;\n      try {\n        const response = await api.get('/products');\n        setProducts(response.data);\n        setLoadProducts(true);\n      } catch (error) {\n        console.error(error);\n      } finally {}\n    }\n    getProducts();\n  }, [navigate, products]);\n  const equalProducts = cartList.reduce((prod, element) => {\n    if (!prod[element.name]) {\n      prod[element.name] = {\n        count: 0,\n        price: element.price,\n        img: element.img\n      };\n    }\n    prod[element.name].count++;\n    return prod;\n  }, {});\n  const productCount = Object.keys(equalProducts).map((name, index) => ({\n    id: index,\n    name: name,\n    count: equalProducts[name].count,\n    price: equalProducts[name].price,\n    img: equalProducts[name].img\n  }));\n  function addProductOnCart(item) {\n    const plusProduct = productsOnCart.map(prod => prod.id === item.id && item.count >= 0 ? {\n      ...prod,\n      count: prod.count + 1\n    } : prod).filter(prod => prod.count > 0);\n    setProductsOnCart(plusProduct);\n  }\n  function removeProductOnCart(item) {\n    const minusProduct = productsOnCart.map(prod => prod.id === item.id && item.count > 0 ? {\n      ...prod,\n      count: prod.count - 1\n    } : prod);\n    setProductsOnCart(minusProduct);\n  }\n  function deleteProductOnCart(item) {\n    setProductsOnCart(productsOnCart => productsOnCart.filter(prod => prod.id !== item.id));\n  }\n  return /*#__PURE__*/_jsxDEV(CartContext.Provider, {\n    value: {\n      productCount,\n      equalProducts,\n      products,\n      setProducts,\n      loadProducts,\n      modalView,\n      setModalView,\n      cartList,\n      setCartList,\n      productsOnCart,\n      setProductsOnCart,\n      addProductOnCart,\n      removeProductOnCart,\n      deleteProductOnCart,\n      filter,\n      setFilter\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 103,\n    columnNumber: 9\n  }, this);\n};\n_s(CartProvider, \"7dZ7vi+O4f2kHmlJnKlPElqQbw0=\", false, function () {\n  return [useNavigate];\n});\n_c = CartProvider;\nvar _c;\n$RefreshReg$(_c, \"CartProvider\");","map":{"version":3,"names":["createContext","useEffect","useState","useNavigate","api","CartContext","CartProvider","children","navigate","products","setProducts","loadProducts","setLoadProducts","modalView","setModalView","cartList","setCartList","productsOnCart","setProductsOnCart","filter","setFilter","getProducts","token","localStorage","getItem","defaults","headers","common","authorization","response","get","data","error","console","equalProducts","reduce","prod","element","name","count","price","img","productCount","Object","keys","map","index","id","addProductOnCart","item","plusProduct","removeProductOnCart","minusProduct","deleteProductOnCart"],"sources":["/home/renan/Desktop/KENZIE/M3/SPRINT 5/ENTREGAS/VERCEL/renangiaretta./src/contexts/CartContext.tsx"],"sourcesContent":["import { createContext, useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { api } from '../services/api';\n\n\ntype iProduct = {\n    id   : number,\n    name : string,\n    count: number,\n    price: number,\n    img  : 'img.png'\n  }\n\ninterface iCartContextProps {\n    products           : iProduct[]\n    setProducts        : (newValue: any[]) => void\n    loadProducts       : boolean\n    modalView          : boolean\n    setModalView       : (newValue: boolean) => void\n    cartList           : iProduct[]\n    setCartList        : (newValue: iProduct[]) => void\n    productsOnCart     : any[]\n    setProductsOnCart  : (newValue: any[]) => void\n    equalProducts      : iProduct[]\n    productCount       : iProduct[]\n    addProductOnCart   : any\n    removeProductOnCart: any\n    deleteProductOnCart: any\n    filter             : string | undefined\n    setFilter          : any\n}\n\n\nexport const CartContext = createContext({} as iCartContextProps)\n\ninterface iCartProviderProps {\n    children: React.ReactNode\n}\n\nexport const CartProvider = ({ children }: iCartProviderProps ) => {\n    const navigate                              = useNavigate()\n    const [ products, setProducts ]             = useState<any[]>([])\n    const [ loadProducts, setLoadProducts ]     = useState(false)\n    const [ modalView, setModalView ]           = useState(false)\n    const [ cartList, setCartList ]             = useState<any[]>([])\n    const [ productsOnCart, setProductsOnCart ] = useState<any[]>([])\n    const [ filter, setFilter ]                 = useState()\n\n    useEffect(() => {\n        \n\n        async function getProducts (  ) {\n            const token                                     = localStorage.getItem('TOKEN')\n                  api.defaults.headers.common.authorization = `Bearer ${token}`\n            try {\n                const response = await api.get('/products')\n                setProducts(response.data)\n                setLoadProducts(true)\n            \n                } catch (error) {\n                    console.error(error)\n                }finally{\n                }\n            }\n              getProducts()\n          },[navigate, products])\n\n\n    const equalProducts = cartList.reduce((prod, element ) => {\n        if(!prod[element.name]) {\n          prod[element.name] = {\n            count: 0,\n            price: element.price,\n            img  : element.img\n          }\n        }\n        prod[element.name].count++\n        return prod\n      }, {})\n      const productCount: iProduct[] = Object.keys(equalProducts).map((name, index) => ({\n        id   : index,\n        name : name,\n        count: equalProducts[name].count,\n        price: equalProducts[name].price,\n        img  : equalProducts[name].img,\n      }))\n\n      function addProductOnCart(item: iProduct): void {\n        const plusProduct = productsOnCart.map((prod) => (prod.id === item.id && item.count >= 0 ? { ...prod, count: prod.count + 1 } : prod)).filter((prod) => prod.count > 0);\n        setProductsOnCart(plusProduct)\n      }\n      \n\n      function removeProductOnCart(item: iProduct) {\n        const minusProduct = productsOnCart.map((prod) => (prod.id === item.id && item.count > 0 ? { ...prod, count: prod.count - 1 } : prod));\n        setProductsOnCart(minusProduct)\n      }\n      function deleteProductOnCart(item: iProduct) {\n        setProductsOnCart(productsOnCart => productsOnCart.filter(prod => prod.id !== item.id))\n      }\n\n    return(\n        <CartContext.Provider value = {{ productCount, equalProducts, products, setProducts, loadProducts, modalView, setModalView, cartList, setCartList, productsOnCart, setProductsOnCart, addProductOnCart, removeProductOnCart, deleteProductOnCart, filter, setFilter, }}>\n        {children}\n        </CartContext.Provider>\n    )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}